"use strict";(self["webpackChunkvue2_v19"]=self["webpackChunkvue2_v19"]||[]).push([[292],{7292:function(t,e,o){o.r(e),o.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{margin:"10px 0"}},[e("el-input",{staticClass:"ml-5",staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"請輸入房號","suffix-icon":"el-icon-search"},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),e("el-button",{attrs:{type:"warning"},on:{click:t.reset}},[t._v("重置")])],1),e("div",{staticStyle:{margin:"10px 0"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v(" 新增 "),e("i",{staticClass:"el-icon-circle-plus-outline"})])],1),e("el-table",{staticStyle:{"min-width":"100%"},attrs:{data:t.tableData,border:"",stripe:"","header-cell-class-name":t.headerBg,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[e("el-table-column",{staticStyle:{"min-width":"5%"},attrs:{prop:"id",label:"編號"}}),e("el-table-column",{staticStyle:{"min-width":"30%"},attrs:{prop:"roomType.id",label:"房型名稱",formatter:t.roomTypeColumn}}),e("el-table-column",{staticStyle:{"min-width":"30%"},attrs:{prop:"roomFloor",label:"樓層"}}),e("el-table-column",{staticStyle:{"min-width":"30%"},attrs:{prop:"roomNum",label:"房號"}}),e("el-table-column",{staticStyle:{"min-width":"30%"},attrs:{prop:"roomStatus",label:"狀態",formatter:t.formatterColumn}}),e("el-table-column",{staticStyle:{"min-width":"35%"},attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.handleEdit(o.row)}}},[t._v(" 編輯 "),e("i",{staticClass:"el-icon-edit"})]),e("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"確定","cancel-button-text":"我再想想",icon:"el-icon-info","icon-color":"red",title:"您確定刪除嗎？"},on:{confirm:function(e){return t.del(o.row.id)}}},[e("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v(" 刪除 "),e("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),e("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[10,20,30,40],"page-size":40,layout:"total, sizes, prev, pager, next, jumper",total:t.rawList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),e("el-dialog",{attrs:{title:"房務資料",visible:t.dialogFormVisible,width:"50%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{"label-width":"80px",size:"small"}},[e("el-form-item",{attrs:{label:"房型名稱"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.addForm.roomType,expression:"addForm.roomType"}],staticStyle:{width:"100%",height:"30px",border:"1px solid #DCDFE6",color:"#606266"},attrs:{placeholder:"請選擇房型名稱"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.addForm,"roomType",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"1"}},[t._v("經濟雙人房")]),e("option",{attrs:{value:"2"}},[t._v("經濟四人房")]),e("option",{attrs:{value:"3"}},[t._v("景觀雙人房")]),e("option",{attrs:{value:"4"}},[t._v("景觀四人房")]),e("option",{attrs:{value:"5"}},[t._v("豪華雙人房")]),e("option",{attrs:{value:"6"}},[t._v("豪華四人房")]),e("option",{attrs:{value:"7"}},[t._v("尊榮雙人房")]),e("option",{attrs:{value:"8"}},[t._v("尊榮四人房")]),e("option",{attrs:{value:"9"}},[t._v("總統套房")])])]),e("el-form-item",{attrs:{label:"樓　　層"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.addForm.roomFloor,callback:function(e){t.$set(t.addForm,"roomFloor",e)},expression:"addForm.roomFloor"}})],1),e("el-form-item",{attrs:{label:"房　　號"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.addForm.roomNum,callback:function(e){t.$set(t.addForm,"roomNum",e)},expression:"addForm.roomNum"}})],1),e("el-form-item",{attrs:{label:"狀　　態"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.addForm.roomStatus,expression:"addForm.roomStatus"}],staticStyle:{width:"100%",height:"30px",border:"1px solid #DCDFE6",color:"#606266"},attrs:{placeholder:"請選擇房務狀態"},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.addForm,"roomStatus",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"1"}},[t._v("待入住")]),e("option",{attrs:{value:"2"}},[t._v("已入住")]),e("option",{attrs:{value:"3"}},[t._v("已退房")]),e("option",{attrs:{value:"0"}},[t._v("退款中")])])]),e("el-form-item",{attrs:{label:"備　　註"}},[e("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:10},model:{value:t.addForm.note,callback:function(e){t.$set(t.addForm,"note",e)},expression:"addForm.note"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("確 定")])],1)],1),e("el-dialog",{attrs:{title:"房務資料",visible:t.dialogFormVisibleedit,width:"50%"},on:{"update:visible":function(e){t.dialogFormVisibleedit=e}}},[e("el-form",{attrs:{model:t.editForm,"label-width":"80px",size:"small"}},[e("el-form-item",{attrs:{label:"編號"}},[e("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.editForm.id,callback:function(e){t.$set(t.editForm,"id",e)},expression:"editForm.id"}})],1),e("el-form-item",{attrs:{label:"房型名稱"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.editForm.roomType,expression:"editForm.roomType"}],staticStyle:{width:"100%",height:"30px",border:"1px solid #DCDFE6",color:"#606266"},domProps:{value:t.editForm.roomType},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.editForm,"roomType",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"1"}},[t._v("經濟雙人房")]),e("option",{attrs:{value:"2"}},[t._v("經濟四人房")]),e("option",{attrs:{value:"3"}},[t._v("景觀雙人房")]),e("option",{attrs:{value:"4"}},[t._v("景觀四人房")]),e("option",{attrs:{value:"5"}},[t._v("豪華雙人房")]),e("option",{attrs:{value:"6"}},[t._v("豪華四人房")]),e("option",{attrs:{value:"7"}},[t._v("尊榮雙人房")]),e("option",{attrs:{value:"8"}},[t._v("尊榮四人房")]),e("option",{attrs:{value:"9"}},[t._v("總統套房")])])]),e("el-form-item",{attrs:{label:"樓　　層"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.editForm.roomFloor,callback:function(e){t.$set(t.editForm,"roomFloor",e)},expression:"editForm.roomFloor"}})],1),e("el-form-item",{attrs:{label:"房 　號"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.editForm.roomNum,callback:function(e){t.$set(t.editForm,"roomNum",e)},expression:"editForm.roomNum"}})],1),e("el-form-item",{attrs:{label:"狀　　態"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.editForm.roomStatus,expression:"editForm.roomStatus"}],staticStyle:{width:"100%",height:"30px",border:"1px solid #DCDFE6",color:"#606266"},domProps:{value:t.editForm.roomStatus},on:{change:function(e){var o=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.editForm,"roomStatus",e.target.multiple?o:o[0])}}},[e("option",{attrs:{value:"1"}},[t._v("待入住")]),e("option",{attrs:{value:"2"}},[t._v("已入住")]),e("option",{attrs:{value:"3"}},[t._v("已退房")]),e("option",{attrs:{value:"0"}},[t._v("退款中")])])]),e("el-form-item",{attrs:{label:"備　　註"}},[e("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:10},model:{value:t.editForm.note,callback:function(e){t.$set(t.editForm,"note",e)},expression:"editForm.note"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisibleedit=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.edit}},[t._v("確 定")])],1)],1)],1)},r=[],l=(o(7658),{name:"roomtype",data(){return{currentPage1:1,pageSize:40,rawList:[],tableData:[{id:"",roomType:"",roomFloor:"",roomNum:"",roomStatus:"",note:""}],addForm:{},dialogFormVisible:!1,roomTypeOptions:[{label:"經濟雙人房",value:"1"},{label:"經濟四人房",value:"2"},{label:"景觀雙人房",value:"3"},{label:"景觀四人房",value:"4"},{label:"豪華雙人房",value:"5"},{label:"豪華四人房",value:"6"},{label:"尊榮雙人房",value:"7"},{label:"尊榮四人房",value:"8"},{label:"總統套房",value:"9"}],statusOptions:[{label:"待入住",value:"1"},{label:"已入住",value:"2"},{label:"已退房",value:"3"},{label:"退款中",value:"0"}],editForm:{},dialogFormVisibleedit:!1,multipleSelection:[],headerBg:"headerBg",inputVal:""}},created(){this.getAllData()},watch:{inputVal(t){t?this.searchData(!0):this.searchData(!1)}},methods:{searchData(t){if(this.currentPage=1,t){let t=[];this.inputVal&&this.tableData.filter((e=>{-1!==e.roomNum.indexOf(this.inputVal)&&t.push(e)})),this.tableData=t}else this.refreshData()},reset(){this.inputVal="",this.getAllData()},getAllData(){var t="/room/";this.$http.get(t,{params:{id:this.id,roomType:this.roomType,roomFloor:this.roomFloor,roomNum:this.roomNum,roomStatus:this.roomStatus,note:this.note}}).then((t=>{console.log(t),this.tableData=t.data,this.rawList=t.data,this.currentChangePage(this.rawList,1)}))},handleAdd(){this.dialogFormVisible=!0,this.addForm={}},add(){this.$http.post("/room/",this.addForm).then((t=>{t?(this.$message.success("新增成功"),this.dialogFormVisible=!1,this.getAllData()):this.$message.error("新增失败")}))},handleEdit(t){this.editForm={id:t.id,roomType:t.roomType.id,roomFloor:t.roomFloor,roomNum:t.roomNum,roomStatus:t.roomStatus,note:t.note},this.dialogFormVisibleedit=!0},edit(){this.$http.put("/room/"+this.editForm.id,{id:this.editForm.id,roomType:this.editForm.roomType,roomFloor:this.editForm.roomFloor,roomNum:this.editForm.roomNum,roomStatus:this.editForm.roomStatus,note:this.editForm.note}).then((t=>{t?(this.$message.success("修改成功"),this.dialogFormVisibleedit=!1,this.getAllData()):this.$message.error("修改失败")}))},del(t){this.$http.delete("/room/"+t).then((t=>{t?(this.$message.success("删除成功"),this.getAllData()):this.$message.error("删除失败")}))},handleSelectionChange(t){console.log(t),this.multipleSelection=t},formatterColumn(t,e){switch(t.roomStatus){case 1:return"待入住";case 2:return"已入住";case 3:return"已退房";default:return"退款中"}},roomTypeColumn(t,e){switch(t.roomType.id){case 1:return"經濟雙人房";case 2:return"經濟四人房";case 3:return"景觀雙人房";case 4:return"景觀四人房";case 5:return"豪華雙人房";case 6:return"豪華四人房";case 7:return"尊榮雙人房";case 8:return"尊榮四人房";default:return"總統套房"}},handleSizeChange:function(t){this.pageSize=t,this.handleCurrentChange(this.currentPage1)},handleCurrentChange:function(t){this.currentPage1=t,this.currentChangePage(this.rawList,t)},currentChangePage(t,e){let o=(e-1)*this.pageSize,a=e*this.pageSize;for(this.tableData=[];o<a;o++)t[o]&&this.tableData.push(t[o])}}}),i=l,s=o(1001),n=(0,s.Z)(i,a,r,!1,null,null,null),m=n.exports}}]);
//# sourceMappingURL=292.86fe47f9.js.map