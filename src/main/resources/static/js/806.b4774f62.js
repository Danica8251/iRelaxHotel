"use strict";(self["webpackChunkvue2_v19"]=self["webpackChunkvue2_v19"]||[]).push([[806],{7642:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var l=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticStyle:{margin:"10px 0"}},[e("el-input",{staticClass:"ml-5",staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"請輸入標題名稱","suffix-icon":"el-icon-search"},model:{value:t.inputVal,callback:function(e){t.inputVal=e},expression:"inputVal"}}),e("el-button",{attrs:{type:"warning"},on:{click:t.reset}},[t._v("重置")])],1),e("div",{staticStyle:{margin:"10px 0"}},[e("el-button",{attrs:{type:"primary"},on:{click:t.handleAdd}},[t._v(" 新增 "),e("i",{staticClass:"el-icon-circle-plus-outline"})])],1),e("el-table",{staticStyle:{"min-width":"100%"},attrs:{data:t.tableData,border:"",stripe:"","header-cell-class-name":t.headerBg,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[e("el-table-column",{staticStyle:{"min-width":"5%"},attrs:{prop:"id",label:"編號"}}),e("el-table-column",{staticStyle:{"min-width":"15%"},attrs:{prop:"newsType",label:"類型",formatter:t.formatterColumn}}),e("el-table-column",{staticStyle:{"min-width":"15%"},attrs:{prop:"title",label:"標題"}}),e("el-table-column",{staticStyle:{"min-width":"15%"},attrs:{prop:"startDate",label:"開始日期"}}),e("el-table-column",{staticStyle:{"min-width":"15%"},attrs:{prop:"endDate",label:"結束日期"}}),e("el-table-column",{staticStyle:{"min-width":"15%"},attrs:{label:"圖片"},scopedSlots:t._u([{key:"default",fn:function({row:t}){return[e("el-avatar",{staticStyle:{width:"50px",height:"50px"},attrs:{fit:"scale-down",src:"data:image/*;base64,"+t.pic}})]}}])}),e("el-table-column",{staticStyle:{"min-width":"20%"},attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"編輯",placement:"top"}},[e("el-button",{attrs:{type:"success",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.handleEdit(a.row)}}})],1),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"刪除",placement:"top"}},[e("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"確定","cancel-button-text":"我再想想",icon:"el-icon-info","icon-color":"red",title:"您確定刪除嗎？"},on:{confirm:function(e){return t.del(a.row.id)}}},[e("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)]}}])})],1),e("el-pagination",{attrs:{"current-page":t.currentPage1,"page-sizes":[5,10,15,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:t.rawList.length},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),e("el-dialog",{attrs:{title:"最新消息與活動資料",visible:t.dialogFormVisible,width:"50%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[e("el-form",{attrs:{"label-width":"80px",size:"small"}},[e("el-form-item",{attrs:{label:"類別"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.addForm.newsType,expression:"addForm.newsType"}],staticStyle:{width:"100%",height:"30px",border:"1px solid #DCDFE6",color:"#606266"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.addForm,"newsType",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"1"}},[t._v("活動情報")]),e("option",{attrs:{value:"2"}},[t._v("住房優惠")])])]),e("el-form-item",{attrs:{label:"標題"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.addForm.title,callback:function(e){t.$set(t.addForm,"title",e)},expression:"addForm.title"}})],1),e("el-form-item",{attrs:{label:"開始日期"}},[e("el-input",{attrs:{autocomplete:"off",type:"date"},model:{value:t.addForm.startDate,callback:function(e){t.$set(t.addForm,"startDate",e)},expression:"addForm.startDate"}})],1),e("el-form-item",{attrs:{label:"結束日期"}},[e("el-input",{attrs:{autocomplete:"off",type:"date"},model:{value:t.addForm.endDate,callback:function(e){t.$set(t.addForm,"endDate",e)},expression:"addForm.endDate"}})],1),e("el-form-item",{attrs:{label:"圖片"}},[e("el-upload",{ref:"uploadMutiple",attrs:{action:"action",name:"files","auto-upload":!1,"on-success":t.allHandleSuccess,"on-change":t.handleChange,"file-list":t.fileList,"http-request":t.allUpload,"before-upload":t.before_upload}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("點擊上傳")])],1)],1),e("el-form-item",{attrs:{label:"內容"}},[e("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:10},model:{value:t.addForm.content,callback:function(e){t.$set(t.addForm,"content",e)},expression:"addForm.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("確 定")])],1)],1),e("el-dialog",{attrs:{title:"最新消息與活動資料",visible:t.dialogFormVisibleedit,width:"50%"},on:{"update:visible":function(e){t.dialogFormVisibleedit=e}}},[e("el-form",{attrs:{model:t.editForm,"label-width":"80px",size:"small"}},[e("el-form-item",{attrs:{label:"編號"}},[e("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:t.editForm.id,callback:function(e){t.$set(t.editForm,"id",e)},expression:"editForm.id"}})],1),e("el-form-item",{attrs:{label:"消息類型"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.editForm.newsType,expression:"editForm.newsType"}],staticStyle:{width:"100%",height:"30px",border:"1px solid #DCDFE6",color:"#606266"},domProps:{value:t.editForm.newsType},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.editForm,"newsType",e.target.multiple?a:a[0])}}},[e("option",{attrs:{value:"1"}},[t._v("活動情報")]),e("option",{attrs:{value:"2"}},[t._v("住房優惠")])])]),e("el-form-item",{attrs:{label:"標題"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.editForm.title,callback:function(e){t.$set(t.editForm,"title",e)},expression:"editForm.title"}})],1),e("el-form-item",{attrs:{label:"開始日期"}},[e("el-input",{attrs:{autocomplete:"off",type:"date"},model:{value:t.editForm.startDate,callback:function(e){t.$set(t.editForm,"startDate",e)},expression:"editForm.startDate"}})],1),e("el-form-item",{attrs:{label:"截止日期"}},[e("el-input",{attrs:{autocomplete:"off",type:"date"},model:{value:t.editForm.endDate,callback:function(e){t.$set(t.editForm,"endDate",e)},expression:"editForm.endDate"}})],1),e("el-form-item",{attrs:{label:"照片"}},[e("el-upload",{ref:"uploadMutiple",staticClass:"upload-demo",attrs:{"list-type":"picture","on-preview":t.handlePreview,"on-remove":t.handleRemove,action:"action",name:"files","auto-upload":!1,"on-success":t.allHandleSuccess,"on-change":t.handleChange,"file-list":t.fileList,"http-request":t.allUpload,"before-upload":t.before_upload}},[e("el-button",{attrs:{size:"small",type:"primary"}},[t._v("點擊上傳")])],1)],1),e("el-form-item",{attrs:{label:"內容"}},[e("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:10},model:{value:t.editForm.content,callback:function(e){t.$set(t.editForm,"content",e)},expression:"editForm.content"}})],1)],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogFormVisibleedit=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.edit}},[t._v("確 定")])],1)],1)],1)},i=[],o=(a(7658),{name:"roomtype",data(){return{currentPage1:1,pageSize:5,rawList:[],tableData:[{id:"",newsType:"",title:"",startDate:"",endDate:"",pic:"",content:""}],addForm:{},dialogFormVisible:!1,editForm:{},dialogFormVisibleedit:!1,multipleSelection:[],headerBg:"headerBg",inputVal:"",newsTypeoptions:[{value:1,label:"活動情報"},{value:2,label:"住房優惠"}],fileList:[]}},created(){this.getAllData()},watch:{inputVal(t){t?this.searchData(!0):this.searchData(!1)}},methods:{handlePreview(t){console.warn("handlePreview")},handleRemove(){this.fileList=[]},handleChange(t,e){console.warn("handleChange"),this.fileList=e},submitUpload(){console.warn("submitUpload"),this.$refs.uploadMutiple.submit()},before_upload(){console.warn("before_upload")},allUpload(){console.warn("allUpload")},allHandleSuccess(){console.warn("allHandleSuccess")},searchData(t){if(this.currentPage=1,t){let t=[];this.inputVal&&this.tableData.filter((e=>{-1!==e.title.indexOf(this.inputVal)&&t.push(e)})),this.tableData=t}else this.refreshData()},reset(){this.inputVal="",this.getAllData()},getAllData(){var t="/hotelNews/";this.$http.get(t,{params:{id:this.id,newsType:this.newsType,title:this.title,startDate:this.startDate,endDate:this.endDate,pic:this.pic,content:this.content}}).then((t=>{console.log(t),this.tableData=t.data,this.rawList=t.data,this.currentChangePage(this.rawList,1)}))},handleAdd(){this.dialogFormVisible=!0,this.addForm={}},add(){let t=new FormData;t.append("newsType",this.addForm.newsType),t.append("pic",this.fileList[0].raw),t.append("startDate",this.addForm.startDate),t.append("endDate",this.addForm.endDate),t.append("content",this.addForm.content),t.append("title",this.addForm.title),this.$http.post("/hotelNews/",t).then((t=>{t?(this.$message.success("新增成功"),this.dialogFormVisible=!1,this.getAllData()):this.$message.error("新增失败")}))},handleEdit(t){this.editForm={id:t.id,newsType:t.newsType,title:t.title,startDate:t.startDate.slice(0,10),endDate:t.endDate.slice(0,10),content:t.content},console.warn(this.editForm),this.dialogFormVisibleedit=!0},edit(){let t=new FormData;t.append("newsType",this.editForm.newsType),t.append("title",this.editForm.title),t.append("startDate",this.editForm.startDate),t.append("endDate",this.editForm.endDate),t.append("pic",this.fileList[0].raw),t.append("content",this.editForm.content),this.$http.put("/hotelNews/"+this.editForm.id,t).then((t=>{t?(this.$message.success("修改成功"),this.dialogFormVisibleedit=!1,this.getAllData()):this.$message.error("修改失败")}))},del(t){this.$http.delete("/hotelNews/"+t).then((t=>{t?(this.$message.success("删除成功"),this.getAllData()):this.$message.error("删除失败")}))},handleSelectionChange(t){console.log(t),this.multipleSelection=t},formatterColumn(t){switch(t.newsType){case 1:return"活動情報";default:return"住房優惠"}},handleSizeChange:function(t){this.pageSize=t,this.handleCurrentChange(this.currentPage1)},handleCurrentChange:function(t){this.currentPage1=t,this.currentChangePage(this.rawList,t)},currentChangePage(t,e){let a=(e-1)*this.pageSize,l=e*this.pageSize;for(this.tableData=[];a<l;a++)t[a]&&this.tableData.push(t[a])}}}),s=o,n=a(1001),r=(0,n.Z)(s,l,i,!1,null,null,null),d=r.exports}}]);
//# sourceMappingURL=806.b4774f62.js.map