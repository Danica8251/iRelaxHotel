"use strict";(self["webpackChunkvue2_v19"]=self["webpackChunkvue2_v19"]||[]).push([[34],{2034:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{margin:"10px 0"}},[t("el-input",{staticClass:"ml-5",staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"請輸入房型名稱","suffix-icon":"el-icon-search"},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}),t("el-button",{attrs:{type:"warning"},on:{click:e.reset}},[e._v("重置")])],1),t("div",{staticStyle:{margin:"10px 0"}},[t("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v(" 新增 "),t("i",{staticClass:"el-icon-circle-plus-outline"})])],1),t("el-table",{staticStyle:{"min-width":"100%"},attrs:{data:e.tableData,border:"",stripe:"","header-cell-class-name":e.headerBg,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{staticStyle:{"min-width":"5%"},attrs:{prop:"id",label:"編號"}}),t("el-table-column",{staticStyle:{"min-width":"30%"},attrs:{prop:"roomType",label:"房型名稱"}}),t("el-table-column",{staticStyle:{"min-width":"30%"},attrs:{prop:"roomPerson",label:"入住人數"}}),t("el-table-column",{staticStyle:{"min-width":"30%"},attrs:{prop:"roomPrice",label:"定價"}}),t("el-table-column",{staticStyle:{"min-width":"50%"},attrs:{label:"照片"},scopedSlots:e._u([{key:"default",fn:function({row:e}){return[t("el-avatar",{staticStyle:{width:"50px",height:"50px"},attrs:{fit:"scale-down",src:"data:image/*;base64,"+e.roomPic}})]}}])}),t("el-table-column",{staticStyle:{"min-width":"35%"},attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-button",{attrs:{type:"success"},on:{click:function(t){return e.handleEdit(o.row)}}},[e._v(" 編輯 "),t("i",{staticClass:"el-icon-edit"})]),t("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"確定","cancel-button-text":"我再想想",icon:"el-icon-info","icon-color":"red",title:"您確定刪除嗎？"},on:{confirm:function(t){return e.del(o.row.id)}}},[t("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[e._v(" 刪除 "),t("i",{staticClass:"el-icon-delete"})])],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.currentPage1,"page-sizes":[5,10,15,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.rawList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"房型資料",visible:e.dialogFormVisible,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[t("el-form",{attrs:{"label-width":"80px",size:"small"}},[t("el-form-item",{attrs:{label:"房型名稱"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.roomType,callback:function(t){e.$set(e.addForm,"roomType",t)},expression:"addForm.roomType"}})],1),t("el-form-item",{attrs:{label:"入住人數"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.roomPerson,callback:function(t){e.$set(e.addForm,"roomPerson",t)},expression:"addForm.roomPerson"}})],1),t("el-form-item",{attrs:{label:"定價"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.addForm.roomPrice,callback:function(t){e.$set(e.addForm,"roomPrice",t)},expression:"addForm.roomPrice"}})],1),t("el-form-item",{attrs:{label:"照片"}},[t("el-upload",{ref:"uploadMutiple",attrs:{action:"action",name:"files","auto-upload":!1,"on-success":e.allHandleSuccess,"on-change":e.handleChange,"file-list":e.fileList,"http-request":e.allUpload,"before-upload":e.before_upload}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("點擊上傳")])],1)],1),t("el-form-item",{attrs:{label:"說明"}},[t("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:10},model:{value:e.addForm.content,callback:function(t){e.$set(e.addForm,"content",t)},expression:"addForm.content"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("確 定")])],1)],1),t("el-dialog",{attrs:{title:"房型資料",visible:e.dialogFormVisibleedit,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisibleedit=t}}},[t("el-form",{attrs:{model:e.editForm,"label-width":"80px",size:"small"}},[t("el-form-item",{attrs:{label:"編號"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),t("el-form-item",{attrs:{label:"房型名稱"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.roomType,callback:function(t){e.$set(e.editForm,"roomType",t)},expression:"editForm.roomType"}})],1),t("el-form-item",{attrs:{label:"入住人數"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.roomPerson,callback:function(t){e.$set(e.editForm,"roomPerson",t)},expression:"editForm.roomPerson"}})],1),t("el-form-item",{attrs:{label:"定價"}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:e.editForm.roomPrice,callback:function(t){e.$set(e.editForm,"roomPrice",t)},expression:"editForm.roomPrice"}})],1),t("el-form-item",{attrs:{label:"照片"}},[t("el-upload",{ref:"uploadMutiple",staticClass:"upload-demo",attrs:{"list-type":"picture","on-preview":e.handlePreview,"on-remove":e.handleRemove,action:"action",name:"files","auto-upload":!1,"on-success":e.allHandleSuccess,"on-change":e.handleChange,"file-list":e.fileList,"http-request":e.allUpload,"before-upload":e.before_upload}},[t("el-button",{attrs:{size:"small",type:"primary"}},[e._v("點擊上傳")])],1)],1),t("el-form-item",{attrs:{label:"說明"}},[t("el-input",{attrs:{autocomplete:"off",type:"textarea",rows:10},model:{value:e.editForm.content,callback:function(t){e.$set(e.editForm,"content",t)},expression:"editForm.content"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisibleedit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("確 定")])],1)],1)],1)},i=[],l=(o(7658),{name:"roomtype",data(){return{currentPage1:1,pageSize:5,rawList:[],tableData:[{id:"",roomType:"",roomPerson:"",roomPrice:"",roomPic:"",content:""}],addForm:{},dialogFormVisible:!1,editForm:{},dialogFormVisibleedit:!1,multipleSelection:[],headerBg:"headerBg",inputVal:"",fileList:[]}},created(){this.getAllData()},watch:{inputVal(e){e?this.searchData(!0):this.searchData(!1)}},methods:{handleRemove(){this.fileList=[]},handlePreview(e){console.warn("handlePreview")},handleChange(e,t){console.warn("handleChange"),this.fileList=t},submitUpload(){console.warn("submitUpload"),this.$refs.uploadMutiple.submit()},before_upload(){console.warn("before_upload")},allUpload(){console.warn("allUpload")},allHandleSuccess(){console.warn("allHandleSuccess")},searchData(e){if(this.currentPage=1,e){let e=[];this.inputVal&&this.tableData.filter((t=>{-1!==t.roomType.indexOf(this.inputVal)&&e.push(t)})),this.tableData=e}else this.refreshData()},reset(){this.inputVal="",this.getAllData()},getAllData(){var e="/roomtype/";this.$http.get(e,{params:{id:this.id,roomType:this.roomType,roomPerson:this.roomPerson,roomPrice:this.roomPrice,roomPic:this.roomPic,content:this.content}}).then((e=>{console.log(e),this.tableData=e.data,this.rawList=e.data,this.currentChangePage(this.rawList,1)}))},handleAdd(){this.dialogFormVisible=!0,this.addForm={}},add(){let e=new FormData;e.append("content",this.addForm.content),e.append("roomPic",this.fileList[0].raw),e.append("roomPrice",this.addForm.roomPrice),e.append("roomType",this.addForm.roomType),e.append("roomPerson",this.addForm.roomPerson),this.$http.post("/roomtype/",e).then((e=>{e?(this.$message.success("新增成功"),this.dialogFormVisible=!1,this.getAllData()):this.$message.error("新增失败")}))},handleEdit(e){this.editForm={id:e.id,roomType:e.roomType,roomPerson:e.roomPerson,roomPrice:e.roomPrice,roomPic:e.roomPic,content:e.content},console.warn(this.editForm),this.dialogFormVisibleedit=!0},edit(){let e=new FormData;e.append("content",this.editForm.content),e.append("roomPic",this.fileList[0].raw),e.append("roomPrice",this.editForm.roomPrice),e.append("roomType",this.editForm.roomType),e.append("roomPerson",this.editForm.roomPerson),this.$http.put("/roomtype/"+this.editForm.id,e).then((e=>{e?(this.$message.success("修改成功"),this.dialogFormVisibleedit=!1,this.getAllData()):this.$message.error("修改失败")}))},del(e){this.$http.delete("/roomtype/"+e).then((e=>{e?(this.$message.success("删除成功"),this.getAllData()):this.$message.error("删除失败")}))},handleSelectionChange(e){console.log(e),this.multipleSelection=e},handleSizeChange:function(e){this.pageSize=e,this.handleCurrentChange(this.currentPage1)},handleCurrentChange:function(e){this.currentPage1=e,this.currentChangePage(this.rawList,e)},currentChangePage(e,t){let o=(t-1)*this.pageSize,a=t*this.pageSize;for(this.tableData=[];o<a;o++)e[o]&&this.tableData.push(e[o])}}}),r=l,s=o(1001),n=(0,s.Z)(r,a,i,!1,null,null,null),c=n.exports}}]);
//# sourceMappingURL=34.8b4f12ac.js.map