"use strict";(self["webpackChunkvue2_v19"]=self["webpackChunkvue2_v19"]||[]).push([[44],{3044:function(e,t,o){o.r(t),o.d(t,{default:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticStyle:{margin:"10px 0"}},[t("el-input",{staticClass:"ml-5",staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"請輸入會員帳號","suffix-icon":"el-icon-search"},model:{value:e.inputVal,callback:function(t){e.inputVal=t},expression:"inputVal"}}),t("el-button",{attrs:{type:"warning"},on:{click:e.reset}},[e._v("重置")])],1),t("el-table",{attrs:{data:e.tableData,border:"",stripe:"","header-cell-class-name":e.headerBg,"header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[t("el-table-column",{attrs:{prop:"id",label:"訂單編號"}}),t("el-table-column",{attrs:{prop:"member.account",label:"會員帳號"}}),t("el-table-column",{attrs:{prop:"items[0].checkinDate",label:"入住日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.items[0].checkinDate.slice(0,10))+" ")]}}])}),t("el-table-column",{attrs:{prop:"items[0].checkoutDate",label:"退房日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.items[0].checkoutDate.slice(0,10))+" ")]}}])}),t("el-table-column",{attrs:{prop:"items[0].status",label:"狀態",formatter:e.formatterColumn}}),t("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(o){return[t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"top"}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-view",circle:""},on:{click:function(t){return e.handlelook(o.row)}}})],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"編輯",placement:"top"}},[t("el-button",{attrs:{type:"success",icon:"el-icon-edit",circle:""},on:{click:function(t){return e.handleEdit(o.row)}}})],1),t("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"刪除",placement:"top"}},[t("el-popconfirm",{staticClass:"ml-5",attrs:{"confirm-button-text":"確定","cancel-button-text":"我再想想",icon:"el-icon-info","icon-color":"red",title:"您確定刪除嗎？"},on:{confirm:function(t){return e.del(o.row.id)}}},[t("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)]}}])})],1),t("el-pagination",{attrs:{"current-page":e.currentPage1,"page-sizes":[5,10,15,20],"page-size":5,layout:"total, sizes, prev, pager, next, jumper",total:e.rawList.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),t("el-dialog",{attrs:{title:"訂單明細",visible:e.dialogFormVisiblelook,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisiblelook=t}}},[t("el-form",{attrs:{model:e.lookForm,"label-width":"90px",size:"small",id:"editForm"}},[t("el-form-item",{attrs:{label:"訂單編號"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.id,callback:function(t){e.$set(e.lookForm,"id",t)},expression:"lookForm.id"}})],1),t("el-form-item",{attrs:{label:"訂單日期"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.orderDate,callback:function(t){e.$set(e.lookForm,"orderDate",t)},expression:"lookForm.orderDate"}})],1),t("el-form-item",{attrs:{label:"房型名稱"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.roomType,callback:function(t){e.$set(e.lookForm,"roomType",t)},expression:"lookForm.roomType"}})],1),t("el-form-item",{attrs:{label:"樓　　層"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.roomFloor,callback:function(t){e.$set(e.lookForm,"roomFloor",t)},expression:"lookForm.roomFloor"}})],1),t("el-form-item",{attrs:{label:"房　　號"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.roomNum,callback:function(t){e.$set(e.lookForm,"roomNum",t)},expression:"lookForm.roomNum"}})],1),t("el-form-item",{attrs:{label:"入住日期"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.checkinDate,callback:function(t){e.$set(e.lookForm,"checkinDate",t)},expression:"lookForm.checkinDate"}})],1),t("el-form-item",{attrs:{label:"退房日期"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.checkoutDate,callback:function(t){e.$set(e.lookForm,"checkoutDate",t)},expression:"lookForm.checkoutDate"}})],1),t("el-form-item",{attrs:{label:"房　　價"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.roomPrice,callback:function(t){e.$set(e.lookForm,"roomPrice",t)},expression:"lookForm.roomPrice"}})],1),t("el-form-item",{attrs:{label:"會員帳號"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.account,callback:function(t){e.$set(e.lookForm,"account",t)},expression:"lookForm.account"}})],1),t("el-form-item",{attrs:{label:"會員姓名"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.lookForm.realName,callback:function(t){e.$set(e.lookForm,"realName",t)},expression:"lookForm.realName"}})],1),t("el-form-item",{attrs:{label:"連絡電話"}},[t("el-input",{attrs:{autocomplete:"off",type:"tel",disabled:""},model:{value:e.lookForm.tel,callback:function(t){e.$set(e.lookForm,"tel",t)},expression:"lookForm.tel"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisiblelook=!1}}},[e._v("返 回")])],1)],1),t("el-dialog",{attrs:{title:"訂單狀態",visible:e.dialogFormVisibleedit,width:"50%"},on:{"update:visible":function(t){e.dialogFormVisibleedit=t}}},[t("el-form",{attrs:{model:e.editForm,"label-width":"90px",size:"small",id:"editForm"}},[t("el-form-item",{attrs:{label:"訂單編號"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.editForm.id,callback:function(t){e.$set(e.editForm,"id",t)},expression:"editForm.id"}})],1),t("el-form-item",{attrs:{label:"訂單日期"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.editForm.orderDate,callback:function(t){e.$set(e.editForm,"orderDate",t)},expression:"editForm.orderDate"}})],1),t("el-form-item",{attrs:{label:"入住日期"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.editForm.checkinDate,callback:function(t){e.$set(e.editForm,"checkinDate",t)},expression:"editForm.checkinDate"}})],1),t("el-form-item",{attrs:{label:"退房日期"}},[t("el-input",{attrs:{autocomplete:"off",disabled:""},model:{value:e.editForm.checkoutDate,callback:function(t){e.$set(e.editForm,"checkoutDate",t)},expression:"editForm.checkoutDate"}})],1),t("el-form-item",{attrs:{label:"訂單狀態"}},[t("select",{directives:[{name:"model",rawName:"v-model",value:e.editForm.status,expression:"editForm.status"}],staticStyle:{width:"100%",height:"30px",border:"1px solid #DCDFE6",color:"#606266"},domProps:{value:e.editForm.status},on:{change:function(t){var o=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.editForm,"status",t.target.multiple?o:o[0])}}},[t("option",{attrs:{value:"1"}},[e._v("未完成")]),t("option",{attrs:{value:"2"}},[e._v("已完成")]),t("option",{attrs:{value:"0"}},[e._v("已取消")])])]),t("el-form-item",[t("el-input",{attrs:{autocomplete:"off",disabled:"",type:"hidden"},model:{value:e.editForm.room,callback:function(t){e.$set(e.editForm,"room",t)},expression:"editForm.room"}})],1),t("el-form-item",[t("el-input",{attrs:{autocomplete:"off",disabled:"",type:"hidden"},model:{value:e.editForm.member,callback:function(t){e.$set(e.editForm,"member",t)},expression:"editForm.member"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(t){e.dialogFormVisibleedit=!1}}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:e.edit}},[e._v("確 定")])],1)],1)],1)},a=[],r=(o(7658),{name:"order",data(){return{currentPage1:1,pageSize:5,rawList:[],tableData:[{id:"",orderDate:"",checkinDate:"",checkoutDate:"",status:"",room:"",member:"",item:"",OrderJournal_room:"",account:"",realName:"",tel:"",orderDate:"",roomType:"",roomFloor:"",roomNum:"",roomPrice:""}],editForm:{},dialogFormVisibleedit:!1,lookForm:{},dialogFormVisiblelook:!1,multipleSelection:[],headerBg:"headerBg",inputVal:""}},created(){this.getAllData()},watch:{inputVal(e){e?this.searchData(!0):this.searchData(!1)}},methods:{searchData(e){if(this.currentPage=1,e){let e=[];this.inputVal&&this.tableData.filter((t=>{-1!==t.member.account.indexOf(this.inputVal)&&e.push(t)})),this.tableData=e}else this.refreshData()},reset(){this.inputVal="",this.getAllData()},getAllData(){var e="/order/";this.$http.get(e,{params:{id:this.id,orderDate:this.orderDate,roomType:this.roomType,roomPrice:this.roomPrice,roomFloor:this.roomFloor,roomNum:this.roomNum,checkinDate:this.checkinDate,checkoutDate:this.checkoutDate,status:this.status,account:this.account,realName:this.realName,tel:this.tel,member:this.member,room:this.room,item:this.item}}).then((e=>{console.log(e),this.tableData=e.data,this.rawList=e.data,this.currentChangePage(this.rawList,1)}))},handlelook(e){console.warn(e),this.lookForm={id:e.id,orderDate:e.orderDate.slice(0,10),roomType:e.items[0].room.roomType.roomType,roomFloor:e.items[0].room.roomFloor,roomNum:e.items[0].room.roomNum,checkinDate:e.items[0].checkinDate.slice(0,10),checkoutDate:e.items[0].checkoutDate.slice(0,10),roomPrice:e.items[0].room.roomType.roomPrice,account:e.member.account,realName:e.member.realName,tel:e.member.tel},console.warn(this.lookForm),this.dialogFormVisiblelook=!0},handleEdit(e){console.warn(e),this.editForm={id:e.id,orderDate:e.orderDate.slice(0,10),checkinDate:e.items[0].checkinDate.slice(0,10),checkoutDate:e.items[0].checkoutDate.slice(0,10),status:e.items[0].status,member:e.member.id,room:e.items[0].room.id},console.warn(this.editForm),this.dialogFormVisibleedit=!0},edit(){this.$http.put("/order/"+this.editForm.id,{checkinDate:this.editForm.checkinDate,checkoutDate:this.editForm.checkoutDate,status:this.editForm.status,member_id:this.editForm.member,room_id:this.editForm.room}).then((e=>{e?(this.$message.success("修改成功"),this.dialogFormVisibleedit=!1,this.getAllData()):this.$message.error("修改失败")}))},del(e){this.$http.delete("/order/"+e).then((e=>{e?(this.$message.success("删除成功"),this.getAllData()):this.$message.error("删除失败")}))},handleSelectionChange(e){console.log(e),this.multipleSelection=e},formatterColumn(e){switch(e.items[0].status){case 1:return"未完成";case 2:return"已完成";default:return"已取消"}},handleSizeChange:function(e){this.pageSize=e,this.handleCurrentChange(this.currentPage1)},handleCurrentChange:function(e){this.currentPage1=e,this.currentChangePage(this.rawList,e)},currentChangePage(e,t){let o=(t-1)*this.pageSize,l=t*this.pageSize;for(this.tableData=[];o<l;o++)e[o]&&this.tableData.push(e[o])}}}),i=r,s=o(1001),m=(0,s.Z)(i,l,a,!1,null,null,null),c=m.exports}}]);
//# sourceMappingURL=44.d16eb5ce.js.map